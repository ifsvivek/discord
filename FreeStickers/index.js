(function(s,o,l,t,w,S,u,h){"use strict";const{getChannel:y}=o.findByStoreName("ChannelStore"),a="https://media.discordapp.net/stickers/{stickerId}.{extension}?size=160";function R(e,n){if(!e.guild_id)return!0;const c=y(n).guild_id;return e.guild_id==c}function v(e,n){return e.replace("{stickerId}",n.id).replace("{extension}","png")}const{FormInput:p,FormRow:U,FormSection:f,FormSwitchRow:E,FormText:b}=u.Forms,{ScrollView:A}=u.General;t.storage.stickerURL??=a;function L(){return S.useProxy(t.storage),React.createElement(A,null,React.createElement(f,{title:"Sticker URL",titleStyleType:"no_border"},React.createElement(p,{placeholder:a,value:t.storage.stickerURL,onChange:function(e){t.storage.stickerURL=e==""?a:e}}),React.createElement(b,{style:{paddingHorizontal:14}},["URL to use for stickers.","{stickerId} will be replaced with sticker ID","{extension} will be replaced with extension (currently always 'png')"].join(`
`))),React.createElement(f,{title:"Misc"},React.createElement(E,{label:"Show warning dialog for APNG stickers",subLabel:"This will only appear once",value:!t.storage.acknowledgedApng,onValueChange:function(e){t.storage.acknowledgedApng=!e}}),React.createElement(U,{label:"Restore default configuration",onPress:function(){t.storage.stickerURL=a,t.storage.acknowledgedApng=!1,h.showToast("Restored default configuration.")}})))}const i=o.find(function(e){var n;return(n=e.default)===null||n===void 0?void 0:n.canUseAnimatedEmojis});i.default={...i.default};const g=o.findByProps("sendMessage","receiveMessage"),{getStickerById:C}=o.findByStoreName("StickersStore"),k="canUseStickersEverywhere",F="canUseCustomStickersEverywhere",x=i?.default[k]?k:F,I=[l.instead(x,i.default,function(){return!0}),l.instead("sendStickers",g,function(e,n){const[c,_,G,M]=e,d=_.map(function(r){return C(r)}).filter(function(r){return!R(r,c)});if(!d.length)return n(...e);const m=function(r){r&&(t.storage.acknowledgedApng=!0);const N=d.map(function(B){return v(t.storage.stickerURL,B)}).join(`
`);g.sendMessage(c,{content:N},null,M)};d.find(function(r){return r.format_type==2})&&!t.storage.acknowledgedApng?w.showConfirmationAlert({title:"APNG Stickers",content:"APNG stickers are not supported by FreeStickers and will be non-animated in chat. Do you want to send them anyway?",confirmText:"Send anyway",cancelText:"Cancel",onConfirm:function(){m(!0)}}):m()})],P=L,T=function(){return I.forEach(function(e){return e?.()})};return s.onUnload=T,s.settings=P,s})({},vendetta.metro,vendetta.patcher,vendetta.plugin,vendetta.ui.alerts,vendetta.storage,vendetta.ui.components,vendetta.ui.toasts);
